/* チェック状態の配色 */
.cell-checked {
  background: #e7f1ff !important; /* 青系（Bootstrapに寄せる） */
}
.cell-disabled {
  color: #6c757d;
  background: #f1f3f5;
}

/* 小さめ端末の余白 */
@media (max-width: 576px) {
  #summary .card-body { padding: 0.75rem; }
  .form-label { margin-bottom: 0.25rem; }
}

/* アイコンの設定 */
.summary-icon {
  width: 84px;            /* 表の高さに合わせて微調整 */
  height: 40px;
  object-fit: contain;    /* 縦横比を維持 */
  display: inline-block;
}

/* アイコンセル */
#allFacesTable .name-cell {
  min-width: 72px;
  width: 72px;
  max-width: 72px;
  padding: 4px 0;
}

#allFacesTable .poke-icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

#allFacesTable .poke-icon svg {
  display: block;
  border: 1px solid #bbb;
  border-radius: 10px;
  overflow: hidden;
}

/* ==================== Summary Table Design ==================== */
/* うとうと（1行目） */
.summary-table tbody tr:nth-child(1) > th,
.summary-table tbody tr:nth-child(1) > td {
  background-color: #FFF2CC;
}

/* すやすや（2行目） */
.summary-table tbody tr:nth-child(2) > th,
.summary-table tbody tr:nth-child(2) > td {
  background-color: #DEF4F8;
}

/* ぐっすり（3行目） */
.summary-table tbody tr:nth-child(3) > th,
.summary-table tbody tr:nth-child(3) > td {
  background-color: #DAE3F3;
}

.field-icon {
  height: 24px;   /* アイコンの高さを統一 */
  vertical-align: middle;
}

/* 1) フォントを一律で 2pt 小さく */
.summary-table {
  font-size: calc(1rem - 2pt);
}

/* 2) セル内レイアウト統一（分子／区切り／分母／(％)） */
.summary-table .summary-cell {
  text-align: center;
  line-height: 1.15;
}
.summary-table .summary-cell .sum-top { font-weight: 600; }
.summary-table .summary-cell .sum-mid { /* 必要なら調整 */ }
.summary-table .summary-cell .sum-per { opacity: 0.75; }

/* 2-β) 区切り線：中央寄せ＋長さを「5桁分」目安に短縮 */
.summary-table .summary-cell .sum-hr {
  height: 1px;
  background: currentColor;
  opacity: 0.3;
  margin: 2px auto;   /* 中央寄せ */
  width: 3.5em;       /* ← フォント依存。3.5em ≒ 5桁分の長さ。調整はここ */
}

/* ① 左端（ヘッダー列）の幅を“だけ”狭める */
.summary-table .summary-lefthead-col,            /* thead 1列目(空セル) */
.summary-table tbody th.summary-lefthead {       /* tbody 1列目(アイコン/合計) */
  width: 56px;
  min-width: 56px;
  padding-left: 6px;
  padding-right: 6px;
}

/* ② 左端セル内のアイコンを中央揃え＆サイズ調整 */
.summary-table tbody th.summary-lefthead .summary-icon {
  display: block;    /* ブロック化して */
  margin: 0 auto;    /* 左右中央へ */
  height: 32px;      /* お好みで 20〜28px */
  width: auto;
}

/* ③ “合計”テキストの見栄え（お好み） */
.summary-table tbody th.summary-lefthead.fw-semibold {
  line-height: 1.1;
}

/* （任意）数字が詰まりすぎる場合の縦余白微調整 */
.summary-table td,
.summary-table th {
  vertical-align: middle;
  /* padding: 0.25rem 0.5rem;  ← 必要なら解放して調整 */
}

/* 分子の右にアイコンを置くための行レイアウト */
.summary-table .summary-cell .sum-top-row{
  display:inline-flex;
  align-items:baseline;   /* 数字のベースラインに揃える */
  gap:4px;
}

/* アイコンは数字サイズに合わせる：1em四方。非表示でも幅は確保 */
.summary-table .summary-cell .sum-badge{
  width:1em;
  height:1em;
  object-fit:contain;
  flex:0 0 auto;
  vertical-align:middle;
}

/* 分子＋バッジを横並び（バッジがある時だけ使われる） */
.summary-table .summary-cell .sum-top-row{
  display:inline-flex;
  align-items:baseline;   /* 数字のベースラインに揃える */
  gap:4px;
}

/* バッジは数字のサイズ＝1em に合わせる */
.summary-table .summary-cell .sum-badge{
  width:1em;
  height:1em;
  object-fit:contain;
  flex:0 0 auto;
  vertical-align:middle;
}

/* ===== フィールド別寝顔一覧（ポケモン列の体裁） ===== */
#pane-byfield .byfield-name-cell { text-align: center; vertical-align: middle; }
#pane-byfield .byfield-name-cell .pf-wrap { 
  width: calc(36px + 14px);   /* アイコン＋余白分。ICON_SIZE_FIELD=36pxを想定 */
  margin: 0 auto;
}
#pane-byfield .byfield-icon {
  width: 36px; height: 36px; line-height: 0; margin: 0 auto;
}
#pane-byfield .byfield-icon svg {
  display: block;
  border: 1px solid #bbb;
  border-radius: 10px;
  overflow: hidden;
}
#pane-byfield .byfield-name-cell .pf-text {
  margin-top: 4px; line-height: 1.2;
  word-break: break-word; white-space: normal;
}
#pane-byfield .byfield-name-cell .pf-no {
  font-size: 9px; color: #6c757d;
}
#pane-byfield .byfield-name-cell .pf-name {
  font-weight: 600; font-size: 6px;
  max-width: calc(36px + 10px); /* はみ出し防止（必要に応じて微調整） */
  margin: 0 auto;
}

/* ===== フィールド別寝顔一覧（睡眠タイプ列） ===== */
#pane-byfield .type-cell { 
  text-align: center; 
  font-size: 9pt; 
}

/* ◓ + 数字 の小型バッジ */
.rank-chip {
  display: inline-flex;
  align-items: baseline;
  gap: 4px;
  font-size: 0.9rem; /* 必要なら調整 */
  line-height: 1;
}
.rank-chip .rank-ball { font-weight: 700; }
.rank-chip .rank-num  { font-weight: 600; }

/* クリックできるセルの見た目 */
td.toggle-cell {
  cursor: pointer;
  user-select: none;
}
td.toggle-cell:hover {
  filter: brightness(0.98);
}

/* 検索結果が空のときの「COMPLETED」表示（かわいいバッジ風） */
.completed-msg {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-radius: 9999px;
  background: #fff7d6;
  border: 1px solid #f4e2a1;
  font-weight: 800;
  letter-spacing: .5px;
}
.completed-msg::before { content: "✨"; }

/* ◓ + 数字（rank-chip）。未定義なら有効化（既にあれば重複不要） */
.rank-chip {
  display: inline-flex;
  align-items: baseline;
  gap: 4px;
  font-size: 0.95rem;
  line-height: 1;
}
.rank-chip .rank-ball { font-weight: 700; }
.rank-chip .rank-num  { font-weight: 600; }

/* ポケモンセル共通（既存 byfield と共有） */
.byfield-name-cell .pf-wrap { display:flex; flex-direction:column; align-items:center; }
.byfield-name-cell .byfield-icon svg { display:block; border:1px solid #bbb; border-radius:10px; overflow:hidden; }
.byfield-name-cell .pf-no { font-size:9pt; line-height:1.1; }
.byfield-name-cell .pf-name { font-size:9pt; line-height:1.2; word-break:break-word; white-space:normal; max-width:calc(36px + 8px); }

/* ミニ表（未入手カウント） */
.rank-mini-summary:empty { display: none; }
.rank-mini-summary tr.row-uto  > th, .rank-mini-summary tr.row-uto  > td  { background-color: #fff5db !important; }
.rank-mini-summary tr.row-suya > th, .rank-mini-summary tr.row-suya > td { background-color: #e9f4ff !important; }
.rank-mini-summary tr.row-gu   > th, .rank-mini-summary tr.row-gu   > td { background-color: #ecebff !important; }
.rank-mini-summary table thead th { vertical-align: middle; }

/* 逆引きフィルター（横並び） */
.filter-bar { display:flex; flex-direction:column; align-items:flex-start; gap:10px; }
.filter-item { display:flex; flex-direction:row; align-items:center; gap:8px; white-space:nowrap; }
.filter-item label { margin:0 !important; font-weight:500; }
.filter-item .form-select { width:auto; display:inline-block; }
@media (min-width: 768px) {
  .filter-bar { flex-direction:row; flex-wrap:nowrap; align-items:center; gap:12px 16px; }
}

/* ==== 汎用：タブ下に重ねる固定バー＆表ヘッダー ==== */
:root { --sticky-top: 48px; } /* タブの高さ（JSで上書き） */

/* 各タブ内の「固定ブロック」をまとめるラッパ */
.pane-sticky-wrap{
  position: sticky;
  top: var(--sticky-top);
  z-index: 1020;
  background:#fff;
  padding:.5rem 0;
  border-bottom:1px solid rgba(0,0,0,.075);
}

/* 逆引きのミニ表（固定しても邪魔にならないよう軽量） */
.rank-mini-summary:empty { display:none; }

/* 共通：テーブルヘッダーを sticky にする */
thead.is-sticky {
  position: sticky;
  z-index: 1010;             /* フィルター(z-index:1020)より一段下 */
  background: #fff;
  background-clip: padding-box;
  /* top は JS で inline 指定するのでここでは書かない */
}

/* iOS/Safari の再描画安定化（任意） */
thead.is-sticky { will-change: transform; }
